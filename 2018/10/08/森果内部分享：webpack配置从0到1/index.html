<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0-rc1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="前言对于现代web前端工程化，webpack起到了绝大的作用，此篇文章致力于让你学习webpack的配置，能够从无到有的配置一套属于自己的webpack配置，此教程从基础配置，到优化两个纬度进行讲解，其中有大量的示例，文尾部分会提供git仓库以供代码下载。">
<meta property="og:type" content="article">
<meta property="og:title" content="森果技术分享：webpack配置从0到1">
<meta property="og:url" content="http://example.com/2018/10/08/%E6%A3%AE%E6%9E%9C%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB%EF%BC%9Awebpack%E9%85%8D%E7%BD%AE%E4%BB%8E0%E5%88%B01/index.html">
<meta property="og:site_name" content="Richard Chou">
<meta property="og:description" content="前言对于现代web前端工程化，webpack起到了绝大的作用，此篇文章致力于让你学习webpack的配置，能够从无到有的配置一套属于自己的webpack配置，此教程从基础配置，到优化两个纬度进行讲解，其中有大量的示例，文尾部分会提供git仓库以供代码下载。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46601033-9d1a3d00-cb1e-11e8-8753-fe74d3feb883.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46661600-159aff80-cbec-11e8-9ac8-552c25f68e0d.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46662422-f7ce9a00-cbed-11e8-94e3-dead0563e668.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46662329-b211d180-cbed-11e8-8d36-e7caefad9780.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46663106-d1a9f980-cbef-11e8-8e21-3deac19b522e.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/23492006/46659849-51cc6100-cbe8-11e8-9248-d9e79d36efaa.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/302213/20628702/93f72404-b338-11e6-92d4-9a365550a701.gif">
<meta property="article:published_time" content="2018-10-08T15:31:23.000Z">
<meta property="article:modified_time" content="2024-09-13T03:12:58.264Z">
<meta property="article:author" content="Richard Chou">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/23492006/46601033-9d1a3d00-cb1e-11e8-8753-fe74d3feb883.png">

<link rel="canonical" href="http://example.com/2018/10/08/%E6%A3%AE%E6%9E%9C%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB%EF%BC%9Awebpack%E9%85%8D%E7%BD%AE%E4%BB%8E0%E5%88%B01/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>森果技术分享：webpack配置从0到1 | Richard Chou</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Richard Chou</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Richard Chou's blogs</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/10/08/%E6%A3%AE%E6%9E%9C%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB%EF%BC%9Awebpack%E9%85%8D%E7%BD%AE%E4%BB%8E0%E5%88%B01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Richard Chou">
      <meta itemprop="description" content="Blogs for Richard Chou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Richard Chou">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          森果技术分享：webpack配置从0到1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-08 15:31:23" itemprop="dateCreated datePublished" datetime="2018-10-08T15:31:23+00:00">2018-10-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-13 03:12:58" itemprop="dateModified" datetime="2024-09-13T03:12:58+00:00">2024-09-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对于现代web前端工程化，webpack起到了绝大的作用，此篇文章致力于让你学习webpack的配置，能够从无到有的配置一套属于自己的webpack配置，此教程从基础配置，到优化两个纬度进行讲解，其中有大量的示例，文尾部分会提供git仓库以供代码下载。</p>
<span id="more"></span>

<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>这里只讲解配置相关的细节，不讲解原理性的知识，建议熟练使用webpack之后，学习下webpack是如何工作的，这样可以定制loader和plugin，能够更加高效的解决项目上的问题。</p>
<h2 id="初始化工程"><a href="#初始化工程" class="headerlink" title="初始化工程"></a>初始化工程</h2><p>前端工程化最基础的东西，就是npm包管理器，这一切都是建立在这上面的，首先运行。</p>
<blockquote>
<p>npm init -y</p>
</blockquote>
<p>初始化package.json</p>
<p>前提是你安装了node.js，下载地址</p>
<blockquote>
<p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
</blockquote>
<p>其中 <strong>-y</strong> 指令是跳过package.json的配置，直接初始化一个package.json文件。建议去掉-y指令，进行一次定制化的配置。</p>
<p>建立一个build目录，用于存放webpack相关配置，建立一个src目录，用于存放工程文件。</p>
<h2 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack"></a>安装webpack</h2><p>在build目录下新建一个webpack.base.js文件，这个文件用于存放公共的webpack配置项，比如sass，babel什么的，因为一个工程可能不止一个需求，所以建立一个公共的配置项方便其他需求的配置。</p>
<p>安装webpack依赖，推荐使用yarn</p>
<blockquote>
<p>npm i yarn -g</p>
</blockquote>
<blockquote>
<p>yarn add webpack –dev</p>
</blockquote>
<p>因为是配置4.0版本，所以还需要安装webpack-cli</p>
<blockquote>
<p>yarn add webpack-cli –dev</p>
</blockquote>
<p>配置完成后，在webpack.base.js进行以下配置，测试是否安装成功</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span>(<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;./static/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是一个最简单的配置，引入了 node 的path模块，用于路径解析，定义了webpack入口文件，以及出口的路径及文件名，注意文件名后面有一个[hash]，这个的作用是给打包后的文件添加一个hash值，用户解决浏览器缓存的问题。</p>
<p>再看看入口文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Test</span>()</span><br></pre></td></tr></table></figure>

<p>很简单的代码，只是为了查看打包后的文件。</p>
<p>很关键的一步就是需要在package.json文件中定义打包命令，在package.json文件的script中添加以下代码:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config ./build/webpack.base.js --mode=production&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>build命令的大致意思是，以production模式运行webpack使用build目录下的webpack.base.js配置文件。</p>
<p>上述文件添加完成后，运行：</p>
<blockquote>
<p>npm run build</p>
</blockquote>
<p>可以看见生成了一个dist目录，目录下有一个static目录，其中有一个index.js文件,其中的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=&#123;&#125;;<span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">n</span>)&#123;<span class="keyword">if</span>(t[n])<span class="keyword">return</span> t[n].<span class="property">exports</span>;<span class="keyword">var</span> o=t[n]=&#123;<span class="attr">i</span>:n,<span class="attr">l</span>:!<span class="number">1</span>,<span class="attr">exports</span>:&#123;&#125;&#125;;<span class="keyword">return</span> e[n].<span class="title function_">call</span>(o.<span class="property">exports</span>,o,o.<span class="property">exports</span>,r),o.<span class="property">l</span>=!<span class="number">0</span>,o.<span class="property">exports</span>&#125;r.<span class="property">m</span>=e,r.<span class="property">c</span>=t,r.<span class="property">d</span>=<span class="keyword">function</span>(<span class="params">e,t,n</span>)&#123;r.<span class="title function_">o</span>(e,t)||<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,t,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">get</span>:n&#125;)&#125;,r.<span class="property">r</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="title class_">Symbol</span>&amp;&amp;<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>&amp;&amp;<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>,&#123;<span class="attr">value</span>:<span class="string">&quot;Module&quot;</span>&#125;),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,<span class="string">&quot;__esModule&quot;</span>,&#123;<span class="attr">value</span>:!<span class="number">0</span>&#125;)&#125;,r.<span class="property">t</span>=<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">if</span>(<span class="number">1</span>&amp;t&amp;&amp;(e=<span class="title function_">r</span>(e)),<span class="number">8</span>&amp;t)<span class="keyword">return</span> e;<span class="keyword">if</span>(<span class="number">4</span>&amp;t&amp;&amp;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> e&amp;&amp;e&amp;&amp;e.<span class="property">__esModule</span>)<span class="keyword">return</span> e;<span class="keyword">var</span> n=<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);<span class="keyword">if</span>(r.<span class="title function_">r</span>(n),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(n,<span class="string">&quot;default&quot;</span>,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">value</span>:e&#125;),<span class="number">2</span>&amp;t&amp;&amp;<span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> e)<span class="keyword">for</span>(<span class="keyword">var</span> o <span class="keyword">in</span> e)r.<span class="title function_">d</span>(n,o,<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> e[t]&#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,o));<span class="keyword">return</span> n&#125;,r.<span class="property">n</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=e&amp;&amp;e.<span class="property">__esModule</span>?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> e.<span class="property">default</span>&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> e&#125;;<span class="keyword">return</span> r.<span class="title function_">d</span>(t,<span class="string">&quot;a&quot;</span>,t),t&#125;,r.<span class="property">o</span>=<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(e,t)&#125;,r.<span class="property">p</span>=<span class="string">&quot;./&quot;</span>,<span class="title function_">r</span>(r.<span class="property">s</span>=<span class="number">0</span>)&#125;([<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">new</span> <span class="keyword">class</span>&#123;<span class="title function_">constructor</span>(<span class="params"></span>)&#123;<span class="title function_">alert</span>(<span class="number">1</span>)&#125;&#125;&#125;]);</span><br></pre></td></tr></table></figure>

<p>多了一些文件，在最后可以看到：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="keyword">class</span>&#123;<span class="title function_">constructor</span>(<span class="params"></span>)&#123;<span class="title function_">alert</span>(<span class="number">1</span>)&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>入口文件的代码已经被打包了，但是还是之前的es6的代码，如果想要转换成es5，这就要用到babel了。</p>
<h2 id="loaders-plugins"><a href="#loaders-plugins" class="headerlink" title="loaders &amp; plugins"></a>loaders &amp; plugins</h2><p>webpack的loader作用是，loader通过正则表达式将匹配到的文件中的字符串，经过自己的处理后，再交给下一个loader处理，所以最终得到的文件，是一个自己需要的文件。</p>
<h3 id="bable-loader"><a href="#bable-loader" class="headerlink" title="bable-loader"></a>bable-loader</h3><p>这里介绍babel-loader的配置，babel的作用是将低版本浏览器不支持的es6 7 8 的代码转换成可执行的es5代码，而babel-loader的作用是将匹配到的js文件交给babel转换器处理成es5的代码，再交给下一个loader，先安装babel相关的依赖</p>
<blockquote>
<p>yarn add @babel&#x2F;core @babel&#x2F;plugin-transform-runtime @babel&#x2F;preset-env babel-loader –dev</p>
</blockquote>
<blockquote>
<p>yarn add @babel&#x2F;runtime</p>
</blockquote>
<p>用两条命令的原因是， <strong>@babel&#x2F;runtime</strong> 是生产依赖，用于将babel不转换的es6 函数如promise，set, map等转换成es5的 polyfill，并且通过 <strong>@babel&#x2F;plugin-transform-runtime</strong> 插件将这些函数提取成公共的函数，以免重复转换，增加代码量。</p>
<p>完成依赖的安装后，我们需要配置webpack的loader,如下图。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span>(<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;./static/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加了一个module属性，其中有一个字段是rules，值是一个数组，表示可以处理多种格式的文件。test是一个正则表达式，表示需要经过loader处理的文件类型。use对应的是需要使用的loader，是一个数组，可以添加多个loader，处理的顺序是，最后一个loader先处理，第一个loader最后处理，这个后面会详细讲解，现在不懂没关系。</p>
<p>然后在项目根目录新建一个文件，名为 <strong>.babelrc</strong> ,内容如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;@babel/env&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@babel/transform-runtime&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>关于babelrc文件具体的讲解可以看这篇文章,这里我使用的是最新的 <strong>“@babel&#x2F;env”</strong> </p>
<blockquote>
<p><a href="http://www.cnblogs.com/tugenhua0707/p/9452471.html">http://www.cnblogs.com/tugenhua0707/p/9452471.html</a></p>
</blockquote>
<p>运行 <strong>npm run build</strong> 命令，得到如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> n=&#123;&#125;;<span class="keyword">function</span> <span class="title function_">t</span>(<span class="params">r</span>)&#123;<span class="keyword">if</span>(n[r])<span class="keyword">return</span> n[r].<span class="property">exports</span>;<span class="keyword">var</span> o=n[r]=&#123;<span class="attr">i</span>:r,<span class="attr">l</span>:!<span class="number">1</span>,<span class="attr">exports</span>:&#123;&#125;&#125;;<span class="keyword">return</span> e[r].<span class="title function_">call</span>(o.<span class="property">exports</span>,o,o.<span class="property">exports</span>,t),o.<span class="property">l</span>=!<span class="number">0</span>,o.<span class="property">exports</span>&#125;t.<span class="property">m</span>=e,t.<span class="property">c</span>=n,t.<span class="property">d</span>=<span class="keyword">function</span>(<span class="params">e,n,r</span>)&#123;t.<span class="title function_">o</span>(e,n)||<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,n,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">get</span>:r&#125;)&#125;,t.<span class="property">r</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="title class_">Symbol</span>&amp;&amp;<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>&amp;&amp;<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>,&#123;<span class="attr">value</span>:<span class="string">&quot;Module&quot;</span>&#125;),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,<span class="string">&quot;__esModule&quot;</span>,&#123;<span class="attr">value</span>:!<span class="number">0</span>&#125;)&#125;,t.<span class="property">t</span>=<span class="keyword">function</span>(<span class="params">e,n</span>)&#123;<span class="keyword">if</span>(<span class="number">1</span>&amp;n&amp;&amp;(e=<span class="title function_">t</span>(e)),<span class="number">8</span>&amp;n)<span class="keyword">return</span> e;<span class="keyword">if</span>(<span class="number">4</span>&amp;n&amp;&amp;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> e&amp;&amp;e&amp;&amp;e.<span class="property">__esModule</span>)<span class="keyword">return</span> e;<span class="keyword">var</span> r=<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);<span class="keyword">if</span>(t.<span class="title function_">r</span>(r),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(r,<span class="string">&quot;default&quot;</span>,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">value</span>:e&#125;),<span class="number">2</span>&amp;n&amp;&amp;<span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> e)<span class="keyword">for</span>(<span class="keyword">var</span> o <span class="keyword">in</span> e)t.<span class="title function_">d</span>(r,o,<span class="keyword">function</span>(<span class="params">n</span>)&#123;<span class="keyword">return</span> e[n]&#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,o));<span class="keyword">return</span> r&#125;,t.<span class="property">n</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> n=e&amp;&amp;e.<span class="property">__esModule</span>?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> e.<span class="property">default</span>&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> e&#125;;<span class="keyword">return</span> t.<span class="title function_">d</span>(n,<span class="string">&quot;a&quot;</span>,n),n&#125;,t.<span class="property">o</span>=<span class="keyword">function</span>(<span class="params">e,n</span>)&#123;<span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(e,n)&#125;,t.<span class="property">p</span>=<span class="string">&quot;./&quot;</span>,<span class="title function_">t</span>(t.<span class="property">s</span>=<span class="number">0</span>)&#125;([<span class="keyword">function</span>(<span class="params">e,n</span>)&#123;<span class="keyword">new</span> <span class="keyword">function</span> <span class="title function_">e</span>(<span class="params"></span>)&#123;!<span class="keyword">function</span>(<span class="params">e,n</span>)&#123;<span class="keyword">if</span>(!(e <span class="keyword">instanceof</span> n))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Cannot call a class as a function&quot;</span>)&#125;(<span class="variable language_">this</span>,e),<span class="title function_">alert</span>(<span class="number">1</span>)&#125;&#125;]);</span><br></pre></td></tr></table></figure>

<p>在文件的最后，可以看到 es6 的 class 语法已经转换成了es5的代码，至此，babel就配置成功了。</p>
<p>其次一个web前端项目肯定是少不了html文件的，所以接下来教大家处理html文件。</p>
<h3 id="html-loader-以及-html-webpack-plugin"><a href="#html-loader-以及-html-webpack-plugin" class="headerlink" title="html-loader 以及 html-webpack-plugin"></a>html-loader 以及 html-webpack-plugin</h3><p>html-loader可以解析html文档中的图片资源，交给其他的loader处理，如url-loader或者是file-loader等。</p>
<p>html-webpacl-plugin的功能是将一个html作为模版，打包完成后会将打包后的资源比如js css，自动添加进html文档中。</p>
<p>首先进行安装：</p>
<blockquote>
<p>yarn add html-loader html-webpack-plugin –dev</p>
</blockquote>
<p>再向webpack.base.config中添加以下配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span>(<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.html/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在项目根目录下添加一个 <strong>index.html</strong>文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>learn webpack<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时运行打包命令，可以看见输出的文件下已经有了index.html文件，并且已经引入了打包后的js文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;learn webpack&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;./static/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>在浏览器中打开index.html，已经可以正常运行了。</p>
<p><img src="https://user-images.githubusercontent.com/23492006/46601033-9d1a3d00-cb1e-11e8-8753-fe74d3feb883.png" alt="图片加载失败，需科学上网"></p>
<h3 id="css预处理器"><a href="#css预处理器" class="headerlink" title="css预处理器"></a>css预处理器</h3><p>预处理器作为前端css高效的工具，不可不用，这一节教学sass的安装与配置。首先安装css sass的依赖以及style-loader。</p>
<blockquote>
<p>yarn add node-sass sass-loader css-loader style-loader –dev</p>
</blockquote>
<p>如果提示编译失败，需要安装python2的话，就使用cnpm 安装 node-sass</p>
<blockquote>
<p>cnpm i node-sass –save-dev</p>
</blockquote>
<p>其中style-loader的作用是，将处理完成的css文件使用style标签内联进html文档中，之后会讲解将css文件抽离出js文件。</p>
<p>安装完成后进行webpack配置，如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span>(<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里我们同时匹配了css 以及scss文件，因为scss是css的一个超集，所以sass-loader也可以解析css文件，减少了不必要的配置。</p>
<p>再看看使用的loader的顺序，值得注意的是，在这个数组中，webpack使用的loader是倒序执行的，也是就是先执行的sass-loader再执行的css-loader，其次才是style-loader，要是反过来，是会报错的哦。</p>
<p>执行 build 命令得到以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=&#123;&#125;;<span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">r</span>)&#123;<span class="keyword">if</span>(e[r])<span class="keyword">return</span> e[r].<span class="property">exports</span>;<span class="keyword">var</span> o=e[r]=&#123;<span class="attr">i</span>:r,<span class="attr">l</span>:!<span class="number">1</span>,<span class="attr">exports</span>:&#123;&#125;&#125;;<span class="keyword">return</span> t[r].<span class="title function_">call</span>(o.<span class="property">exports</span>,o,o.<span class="property">exports</span>,n),o.<span class="property">l</span>=!<span class="number">0</span>,o.<span class="property">exports</span>&#125;n.<span class="property">m</span>=t,n.<span class="property">c</span>=e,n.<span class="property">d</span>=<span class="keyword">function</span>(<span class="params">t,e,r</span>)&#123;n.<span class="title function_">o</span>(t,e)||<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t,e,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">get</span>:r&#125;)&#125;,n.<span class="property">r</span>=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="title class_">Symbol</span>&amp;&amp;<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>&amp;&amp;<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t,<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>,&#123;<span class="attr">value</span>:<span class="string">&quot;Module&quot;</span>&#125;),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t,<span class="string">&quot;__esModule&quot;</span>,&#123;<span class="attr">value</span>:!<span class="number">0</span>&#125;)&#125;,n.<span class="property">t</span>=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">if</span>(<span class="number">1</span>&amp;e&amp;&amp;(t=<span class="title function_">n</span>(t)),<span class="number">8</span>&amp;e)<span class="keyword">return</span> t;<span class="keyword">if</span>(<span class="number">4</span>&amp;e&amp;&amp;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> t&amp;&amp;t&amp;&amp;t.<span class="property">__esModule</span>)<span class="keyword">return</span> t;<span class="keyword">var</span> r=<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);<span class="keyword">if</span>(n.<span class="title function_">r</span>(r),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(r,<span class="string">&quot;default&quot;</span>,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">value</span>:t&#125;),<span class="number">2</span>&amp;e&amp;&amp;<span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> t)<span class="keyword">for</span>(<span class="keyword">var</span> o <span class="keyword">in</span> t)n.<span class="title function_">d</span>(r,o,<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> t[e]&#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,o));<span class="keyword">return</span> r&#125;,n.<span class="property">n</span>=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=t&amp;&amp;t.<span class="property">__esModule</span>?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> t.<span class="property">default</span>&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> t&#125;;<span class="keyword">return</span> n.<span class="title function_">d</span>(e,<span class="string">&quot;a&quot;</span>,e),e&#125;,n.<span class="property">o</span>=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(t,e)&#125;,n.<span class="property">p</span>=<span class="string">&quot;./&quot;</span>,<span class="title function_">n</span>(n.<span class="property">s</span>=<span class="number">0</span>)&#125;([<span class="keyword">function</span>(<span class="params">t,e,n</span>)&#123;<span class="string">&quot;use strict&quot;</span>;n.<span class="title function_">r</span>(e);<span class="title function_">n</span>(<span class="number">1</span>);<span class="keyword">new</span> <span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>)&#123;!<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">if</span>(!(t <span class="keyword">instanceof</span> e))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Cannot call a class as a function&quot;</span>)&#125;(<span class="variable language_">this</span>,t),<span class="title function_">alert</span>(<span class="number">1</span>)&#125;&#125;,<span class="keyword">function</span>(<span class="params">t,e,n</span>)&#123;<span class="keyword">var</span> r=<span class="title function_">n</span>(<span class="number">2</span>);<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> r&amp;&amp;(r=[[t.<span class="property">i</span>,r,<span class="string">&quot;&quot;</span>]]);<span class="keyword">var</span> o=&#123;<span class="attr">hmr</span>:!<span class="number">0</span>,<span class="attr">transform</span>:<span class="keyword">void</span> <span class="number">0</span>,<span class="attr">insertInto</span>:<span class="keyword">void</span> <span class="number">0</span>&#125;;<span class="title function_">n</span>(<span class="number">4</span>)(r,o);r.<span class="property">locals</span>&amp;&amp;(t.<span class="property">exports</span>=r.<span class="property">locals</span>)&#125;,<span class="keyword">function</span>(<span class="params">t,e,n</span>)&#123;(t.<span class="property">exports</span>=<span class="title function_">n</span>(<span class="number">3</span>)(!<span class="number">1</span>)).<span class="title function_">push</span>([t.<span class="property">i</span>,<span class="string">&quot;.test &#123;\n  height: 100px; &#125;\n  .test .test1 &#123;\n    width: 100px; &#125;\n&quot;</span>,<span class="string">&quot;&quot;</span>])&#125;,<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;t.<span class="property">exports</span>=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=[];<span class="keyword">return</span> e.<span class="property">toString</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> n=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> n=t[<span class="number">1</span>]||<span class="string">&quot;&quot;</span>,r=t[<span class="number">3</span>];<span class="keyword">if</span>(!r)<span class="keyword">return</span> n;<span class="keyword">if</span>(e&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> btoa)&#123;<span class="keyword">var</span> o=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span><span class="string">&quot;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,&quot;</span>+<span class="title function_">btoa</span>(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(t))))+<span class="string">&quot; */&quot;</span>&#125;(r),i=r.<span class="property">sources</span>.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span><span class="string">&quot;/*# sourceURL=&quot;</span>+r.<span class="property">sourceRoot</span>+t+<span class="string">&quot; */&quot;</span>&#125;);<span class="keyword">return</span>[n].<span class="title function_">concat</span>(i).<span class="title function_">concat</span>([o]).<span class="title function_">join</span>(<span class="string">&quot;\n&quot;</span>)&#125;<span class="keyword">return</span>[n].<span class="title function_">join</span>(<span class="string">&quot;\n&quot;</span>)&#125;(e,t);<span class="keyword">return</span> e[<span class="number">2</span>]?<span class="string">&quot;@media &quot;</span>+e[<span class="number">2</span>]+<span class="string">&quot;&#123;&quot;</span>+n+<span class="string">&quot;&#125;&quot;</span>:n&#125;).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>)&#125;,e.<span class="property">i</span>=<span class="keyword">function</span>(<span class="params">t,n</span>)&#123;<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> t&amp;&amp;(t=[[<span class="literal">null</span>,t,<span class="string">&quot;&quot;</span>]]);<span class="keyword">for</span>(<span class="keyword">var</span> r=&#123;&#125;,o=<span class="number">0</span>;o&lt;<span class="variable language_">this</span>.<span class="property">length</span>;o++)&#123;<span class="keyword">var</span> i=<span class="variable language_">this</span>[o][<span class="number">0</span>];<span class="string">&quot;number&quot;</span>==<span class="keyword">typeof</span> i&amp;&amp;(r[i]=!<span class="number">0</span>)&#125;<span class="keyword">for</span>(o=<span class="number">0</span>;o&lt;t.<span class="property">length</span>;o++)&#123;<span class="keyword">var</span> s=t[o];<span class="string">&quot;number&quot;</span>==<span class="keyword">typeof</span> s[<span class="number">0</span>]&amp;&amp;r[s[<span class="number">0</span>]]||(n&amp;&amp;!s[<span class="number">2</span>]?s[<span class="number">2</span>]=<span class="attr">n</span>:n&amp;&amp;(s[<span class="number">2</span>]=<span class="string">&quot;(&quot;</span>+s[<span class="number">2</span>]+<span class="string">&quot;) and (&quot;</span>+n+<span class="string">&quot;)&quot;</span>),e.<span class="title function_">push</span>(s))&#125;&#125;,e&#125;&#125;,<span class="keyword">function</span>(<span class="params">t,e,n</span>)&#123;<span class="keyword">var</span> r=&#123;&#125;,o=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e;<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>===e&amp;&amp;(e=t.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)),e&#125;&#125;(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">window</span>&amp;&amp;<span class="variable language_">document</span>&amp;&amp;<span class="variable language_">document</span>.<span class="property">all</span>&amp;&amp;!<span class="variable language_">window</span>.<span class="property">atob</span>&#125;),i=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=&#123;&#125;;<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">t,n</span>)&#123;<span class="keyword">if</span>(<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> t)<span class="keyword">return</span> <span class="title function_">t</span>();<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>===e[t])&#123;<span class="keyword">var</span> r=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> e?e.<span class="title function_">querySelector</span>(t):<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(t)&#125;.<span class="title function_">call</span>(<span class="variable language_">this</span>,t,n);<span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">HTMLIFrameElement</span>&amp;&amp;r <span class="keyword">instanceof</span> <span class="variable language_">window</span>.<span class="property">HTMLIFrameElement</span>)<span class="keyword">try</span>&#123;r=r.<span class="property">contentDocument</span>.<span class="property">head</span>&#125;<span class="keyword">catch</span>(t)&#123;r=<span class="literal">null</span>&#125;e[t]=r&#125;<span class="keyword">return</span> e[t]&#125;&#125;(),s=<span class="literal">null</span>,a=<span class="number">0</span>,u=[],f=<span class="title function_">n</span>(<span class="number">5</span>);<span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">t,e</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n=<span class="number">0</span>;n&lt;t.<span class="property">length</span>;n++)&#123;<span class="keyword">var</span> o=t[n],i=r[o.<span class="property">id</span>];<span class="keyword">if</span>(i)&#123;i.<span class="property">refs</span>++;<span class="keyword">for</span>(<span class="keyword">var</span> s=<span class="number">0</span>;s&lt;i.<span class="property">parts</span>.<span class="property">length</span>;s++)i.<span class="property">parts</span>[s](o.<span class="property">parts</span>[s]);<span class="keyword">for</span>(;s&lt;o.<span class="property">parts</span>.<span class="property">length</span>;s++)i.<span class="property">parts</span>.<span class="title function_">push</span>(<span class="title function_">b</span>(o.<span class="property">parts</span>[s],e))&#125;<span class="keyword">else</span>&#123;<span class="keyword">var</span> a=[];<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;o.<span class="property">parts</span>.<span class="property">length</span>;s++)a.<span class="title function_">push</span>(<span class="title function_">b</span>(o.<span class="property">parts</span>[s],e));r[o.<span class="property">id</span>]=&#123;<span class="attr">id</span>:o.<span class="property">id</span>,<span class="attr">refs</span>:<span class="number">1</span>,<span class="attr">parts</span>:a&#125;&#125;&#125;&#125;<span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t,e</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n=[],r=&#123;&#125;,o=<span class="number">0</span>;o&lt;t.<span class="property">length</span>;o++)&#123;<span class="keyword">var</span> i=t[o],s=e.<span class="property">base</span>?i[<span class="number">0</span>]+e.<span class="property">base</span>:i[<span class="number">0</span>],a=&#123;<span class="attr">css</span>:i[<span class="number">1</span>],<span class="attr">media</span>:i[<span class="number">2</span>],<span class="attr">sourceMap</span>:i[<span class="number">3</span>]&#125;;r[s]?r[s].<span class="property">parts</span>.<span class="title function_">push</span>(a):n.<span class="title function_">push</span>(r[s]=&#123;<span class="attr">id</span>:s,<span class="attr">parts</span>:[a]&#125;)&#125;<span class="keyword">return</span> n&#125;<span class="keyword">function</span> <span class="title function_">p</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> n=<span class="title function_">i</span>(t.<span class="property">insertInto</span>);<span class="keyword">if</span>(!n)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Couldn&#x27;t find a style target. This probably means that the value for the &#x27;insertInto&#x27; parameter is invalid.&quot;</span>);<span class="keyword">var</span> r=u[u.<span class="property">length</span>-<span class="number">1</span>];<span class="keyword">if</span>(<span class="string">&quot;top&quot;</span>===t.<span class="property">insertAt</span>)r?r.<span class="property">nextSibling</span>?n.<span class="title function_">insertBefore</span>(e,r.<span class="property">nextSibling</span>):n.<span class="title function_">appendChild</span>(e):n.<span class="title function_">insertBefore</span>(e,n.<span class="property">firstChild</span>),u.<span class="title function_">push</span>(e);<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;bottom&quot;</span>===t.<span class="property">insertAt</span>)n.<span class="title function_">appendChild</span>(e);<span class="keyword">else</span>&#123;<span class="keyword">if</span>(<span class="string">&quot;object&quot;</span>!=<span class="keyword">typeof</span> t.<span class="property">insertAt</span>||!t.<span class="property">insertAt</span>.<span class="property">before</span>)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;[Style Loader]\n\n Invalid value for parameter &#x27;insertAt&#x27; (&#x27;options.insertAt&#x27;) found.\n Must be &#x27;top&#x27;, &#x27;bottom&#x27;, or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n&quot;</span>);<span class="keyword">var</span> o=<span class="title function_">i</span>(t.<span class="property">insertAt</span>.<span class="property">before</span>,n);n.<span class="title function_">insertBefore</span>(e,o)&#125;&#125;<span class="keyword">function</span> <span class="title function_">d</span>(<span class="params">t</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===t.<span class="property">parentNode</span>)<span class="keyword">return</span>!<span class="number">1</span>;t.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(t);<span class="keyword">var</span> e=u.<span class="title function_">indexOf</span>(t);e&gt;=<span class="number">0</span>&amp;&amp;u.<span class="title function_">splice</span>(e,<span class="number">1</span>)&#125;<span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>===t.<span class="property">attrs</span>.<span class="property">type</span>&amp;&amp;(t.<span class="property">attrs</span>.<span class="property">type</span>=<span class="string">&quot;text/css&quot;</span>),<span class="keyword">void</span> <span class="number">0</span>===t.<span class="property">attrs</span>.<span class="property">nonce</span>)&#123;<span class="keyword">var</span> r=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="number">0</span>;<span class="keyword">return</span> n.<span class="property">nc</span>&#125;();r&amp;&amp;(t.<span class="property">attrs</span>.<span class="property">nonce</span>=r)&#125;<span class="keyword">return</span> <span class="title function_">v</span>(e,t.<span class="property">attrs</span>),<span class="title function_">p</span>(t,e),e&#125;<span class="keyword">function</span> <span class="title function_">v</span>(<span class="params">t,e</span>)&#123;<span class="title class_">Object</span>.<span class="title function_">keys</span>(e).<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">n</span>)&#123;t.<span class="title function_">setAttribute</span>(n,e[n])&#125;)&#125;<span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> n,r,o,i;<span class="keyword">if</span>(e.<span class="property">transform</span>&amp;&amp;t.<span class="property">css</span>)&#123;<span class="keyword">if</span>(!(i=e.<span class="title function_">transform</span>(t.<span class="property">css</span>)))<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;t.<span class="property">css</span>=i&#125;<span class="keyword">if</span>(e.<span class="property">singleton</span>)&#123;<span class="keyword">var</span> u=a++;n=s||(s=<span class="title function_">h</span>(e)),r=m.<span class="title function_">bind</span>(<span class="literal">null</span>,n,u,!<span class="number">1</span>),o=m.<span class="title function_">bind</span>(<span class="literal">null</span>,n,u,!<span class="number">0</span>)&#125;<span class="keyword">else</span> t.<span class="property">sourceMap</span>&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> <span class="variable constant_">URL</span>&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> <span class="variable constant_">URL</span>.<span class="property">createObjectURL</span>&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> <span class="variable constant_">URL</span>.<span class="property">revokeObjectURL</span>&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> <span class="title class_">Blob</span>&amp;&amp;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> btoa?(n=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;link&quot;</span>);<span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>===t.<span class="property">attrs</span>.<span class="property">type</span>&amp;&amp;(t.<span class="property">attrs</span>.<span class="property">type</span>=<span class="string">&quot;text/css&quot;</span>),t.<span class="property">attrs</span>.<span class="property">rel</span>=<span class="string">&quot;stylesheet&quot;</span>,<span class="title function_">v</span>(e,t.<span class="property">attrs</span>),<span class="title function_">p</span>(t,e),e&#125;(e),r=<span class="keyword">function</span>(<span class="params">t,e,n</span>)&#123;<span class="keyword">var</span> r=n.<span class="property">css</span>,o=n.<span class="property">sourceMap</span>,i=<span class="keyword">void</span> <span class="number">0</span>===e.<span class="property">convertToAbsoluteUrls</span>&amp;&amp;o;(e.<span class="property">convertToAbsoluteUrls</span>||i)&amp;&amp;(r=<span class="title function_">f</span>(r));o&amp;&amp;(r+=<span class="string">&quot;\n/*# sourceMappingURL=data:application/json;base64,&quot;</span>+<span class="title function_">btoa</span>(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o))))+<span class="string">&quot; */&quot;</span>);<span class="keyword">var</span> s=<span class="keyword">new</span> <span class="title class_">Blob</span>([r],&#123;<span class="attr">type</span>:<span class="string">&quot;text/css&quot;</span>&#125;),a=t.<span class="property">href</span>;t.<span class="property">href</span>=<span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(s),a&amp;&amp;<span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(a)&#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,n,e),o=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">d</span>(n),n.<span class="property">href</span>&amp;&amp;<span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(n.<span class="property">href</span>)&#125;):(n=<span class="title function_">h</span>(e),r=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> n=e.<span class="property">css</span>,r=e.<span class="property">media</span>;r&amp;&amp;t.<span class="title function_">setAttribute</span>(<span class="string">&quot;media&quot;</span>,r);<span class="keyword">if</span>(t.<span class="property">styleSheet</span>)t.<span class="property">styleSheet</span>.<span class="property">cssText</span>=n;<span class="keyword">else</span>&#123;<span class="keyword">for</span>(;t.<span class="property">firstChild</span>;)t.<span class="title function_">removeChild</span>(t.<span class="property">firstChild</span>);t.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(n))&#125;&#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,n),o=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">d</span>(n)&#125;);<span class="keyword">return</span> <span class="title function_">r</span>(t),<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(e)&#123;<span class="keyword">if</span>(e.<span class="property">css</span>===t.<span class="property">css</span>&amp;&amp;e.<span class="property">media</span>===t.<span class="property">media</span>&amp;&amp;e.<span class="property">sourceMap</span>===t.<span class="property">sourceMap</span>)<span class="keyword">return</span>;<span class="title function_">r</span>(t=e)&#125;<span class="keyword">else</span> <span class="title function_">o</span>()&#125;&#125;t.<span class="property">exports</span>=<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">if</span>(<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="variable constant_">DEBUG</span>&amp;&amp;<span class="variable constant_">DEBUG</span>&amp;&amp;<span class="string">&quot;object&quot;</span>!=<span class="keyword">typeof</span> <span class="variable language_">document</span>)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;The style-loader cannot be used in a non-browser environment&quot;</span>);(e=e||&#123;&#125;).<span class="property">attrs</span>=<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> e.<span class="property">attrs</span>?e.<span class="property">attrs</span>:&#123;&#125;,e.<span class="property">singleton</span>||<span class="string">&quot;boolean&quot;</span>==<span class="keyword">typeof</span> e.<span class="property">singleton</span>||(e.<span class="property">singleton</span>=<span class="title function_">o</span>()),e.<span class="property">insertInto</span>||(e.<span class="property">insertInto</span>=<span class="string">&quot;head&quot;</span>),e.<span class="property">insertAt</span>||(e.<span class="property">insertAt</span>=<span class="string">&quot;bottom&quot;</span>);<span class="keyword">var</span> n=<span class="title function_">l</span>(t,e);<span class="keyword">return</span> <span class="title function_">c</span>(n,e),<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> o=[],i=<span class="number">0</span>;i&lt;n.<span class="property">length</span>;i++)&#123;<span class="keyword">var</span> s=n[i];(a=r[s.<span class="property">id</span>]).<span class="property">refs</span>--,o.<span class="title function_">push</span>(a)&#125;t&amp;&amp;<span class="title function_">c</span>(<span class="title function_">l</span>(t,e),e);<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;o.<span class="property">length</span>;i++)&#123;<span class="keyword">var</span> a;<span class="keyword">if</span>(<span class="number">0</span>===(a=o[i]).<span class="property">refs</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> u=<span class="number">0</span>;u&lt;a.<span class="property">parts</span>.<span class="property">length</span>;u++)a.<span class="property">parts</span>[u]();<span class="keyword">delete</span> r[a.<span class="property">id</span>]&#125;&#125;&#125;&#125;;<span class="keyword">var</span> y=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=[];<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">e,n</span>)&#123;<span class="keyword">return</span> t[e]=n,t.<span class="title function_">filter</span>(<span class="title class_">Boolean</span>).<span class="title function_">join</span>(<span class="string">&quot;\n&quot;</span>)&#125;&#125;();<span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t,e,n,r</span>)&#123;<span class="keyword">var</span> o=n?<span class="string">&quot;&quot;</span>:r.<span class="property">css</span>;<span class="keyword">if</span>(t.<span class="property">styleSheet</span>)t.<span class="property">styleSheet</span>.<span class="property">cssText</span>=<span class="title function_">y</span>(e,o);<span class="keyword">else</span>&#123;<span class="keyword">var</span> i=<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(o),s=t.<span class="property">childNodes</span>;s[e]&amp;&amp;t.<span class="title function_">removeChild</span>(s[e]),s.<span class="property">length</span>?t.<span class="title function_">insertBefore</span>(i,s[e]):t.<span class="title function_">appendChild</span>(i)&#125;&#125;&#125;,<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;t.<span class="property">exports</span>=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="variable language_">window</span>&amp;&amp;<span class="variable language_">window</span>.<span class="property">location</span>;<span class="keyword">if</span>(!e)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;fixUrls requires window.location&quot;</span>);<span class="keyword">if</span>(!t||<span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> t)<span class="keyword">return</span> t;<span class="keyword">var</span> n=e.<span class="property">protocol</span>+<span class="string">&quot;//&quot;</span>+e.<span class="property">host</span>,r=n+e.<span class="property">pathname</span>.<span class="title function_">replace</span>(<span class="regexp">/\/[^\/]*$/</span>,<span class="string">&quot;/&quot;</span>);<span class="keyword">return</span> t.<span class="title function_">replace</span>(<span class="regexp">/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi</span>,<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> o,i=e.<span class="title function_">trim</span>().<span class="title function_">replace</span>(<span class="regexp">/^&quot;(.*)&quot;$/</span>,<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> e&#125;).<span class="title function_">replace</span>(<span class="regexp">/^&#x27;(.*)&#x27;$/</span>,<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> e&#125;);<span class="keyword">return</span><span class="regexp">/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i</span>.<span class="title function_">test</span>(i)?<span class="attr">t</span>:(o=<span class="number">0</span>===i.<span class="title function_">indexOf</span>(<span class="string">&quot;//&quot;</span>)?<span class="attr">i</span>:<span class="number">0</span>===i.<span class="title function_">indexOf</span>(<span class="string">&quot;/&quot;</span>)?n+<span class="attr">i</span>:r+i.<span class="title function_">replace</span>(<span class="regexp">/^\.\//</span>,<span class="string">&quot;&quot;</span>),<span class="string">&quot;url(&quot;</span>+<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o)+<span class="string">&quot;)&quot;</span>)&#125;)&#125;&#125;]);</span><br></pre></td></tr></table></figure>

<p>可以看见sass文件已经转成了css文件，并且内嵌进了js文件中，但是因为js要将css插入页面渲染，所以多了一堆的代码，这样很不利于优化，所以我们接下来将css文件抽离出js文件。</p>
<h3 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="headerlink" title="mini-css-extract-plugin"></a>mini-css-extract-plugin</h3><p>这里我们使用的是 mini-css-extract-plugin，首先进行安装。</p>
<blockquote>
<p>yarn add mini-css-extract-plugin –dev</p>
</blockquote>
<p>安装完成后，进行webpack配置，如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span>(<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.[hash].css&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在plugins中实例化了 <strong>MiniCssExtractPlugin</strong> 并且设置了打包后的名称，以及在rules中修改了最终的loader。</p>
<p>执行打包命令后，可以看见，dist目录下static目录中多了一个index.css文件，并且index.html也自动引入了这个css文件，并且js文件的体积也小了很多。</p>
<p><img src="https://user-images.githubusercontent.com/23492006/46661600-159aff80-cbec-11e8-9ac8-552c25f68e0d.png" alt="图片加载失败，需科学上网"></p>
<h3 id="file-loader-url-loader"><a href="#file-loader-url-loader" class="headerlink" title="file-loader url-loader"></a>file-loader url-loader</h3><p>对于文件的处理，可以使用 <strong>url-loader</strong> 和 <strong>file-loader</strong>，<strong>url-loader</strong> 可以将很小的icon文件转换成base64编码内联进js文件中，这样可以减少http的请求次数，<strong>file-loader</strong> 可以制定一个可以让文件输出的路径便于管理，更加好用的功能是可以使用import 或者 require 图片文件。首先安装依赖：</p>
<blockquote>
<p>yarn add file-loader url-loader –dev</p>
</blockquote>
<p>其次进行webpack的配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span> (<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;static/images&#x27;</span>,</span><br><span class="line">                        <span class="attr">fallback</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.[hash].css&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看见首先对于文件，使用了url-loader，如果文件体积小于8192b 也就是 8kb 左右，那么url-loader会将图片转换为base64内联进js文件中，如果文件大于设定的值，那么就会将文件交给file-loader处理，并且将options选项交给file-loader这个是url的使用方式。</p>
<p>做一个实验，在index.html文件中添加一个img标签,执行打包。如果图片大于8kb图片会被存储到dist&#x2F;static&#x2F;images目录下。</p>
<p><img src="https://user-images.githubusercontent.com/23492006/46662422-f7ce9a00-cbed-11e8-94e3-dead0563e668.png" alt="图片加载失败，需科学上网"></p>
<p>如果文件小于8kb，那么文件会被内联到Html或者js中,这取决于是哪个类型的文件引用了这张图片。</p>
<p><img src="https://user-images.githubusercontent.com/23492006/46662329-b211d180-cbed-11e8-8d36-e7caefad9780.png" alt="图片加载失败，需科学上网"></p>
<p>到这一步，一个项目最基础的几个功能都已经配置完成了，但是只是这样怎么行，没法高效率的开发，接下来就要介绍webpack-dev-server的用法了。</p>
<h2 id="HotModuleReplacementPlugin"><a href="#HotModuleReplacementPlugin" class="headerlink" title="HotModuleReplacementPlugin"></a>HotModuleReplacementPlugin</h2><p>热模块加载依赖于 <strong>webpack-dev-server</strong>，首先安装</p>
<blockquote>
<p>yarn add webpack-dev-server –dev</p>
</blockquote>
<p>接下来进行webpack的配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="keyword">function</span> (<span class="params">targetPath</span>) &#123;</span><br><span class="line">    path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="comment">// use: [MiniCssExtractPlugin.loader, &#x27;css-loader&#x27;, &#x27;sass-loader&#x27;]</span></span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;static/images&#x27;</span>,</span><br><span class="line">                        <span class="attr">fallback</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;inline-source-map&#x27;</span>,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/index.[hash].css&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先require了webpack模块，因为 <strong>HotModuleReplacementPlugin</strong> 是webpack内置的插件，所以不用引入。</p>
<p>其次将css解析的loader中，移除了 <strong>MiniCssExtractPlugin.loader</strong> ，改成了 <strong>style-loader</strong> ,将样式内联进html文档，这样做是为了热更新，如果是用了抽离css的 <strong>MiniCssExtractPlugin.loader</strong> ，就无法热更新了(之前配置是可以热更新的，但这次遇到了未知的情况，所以换一个处理方式)，不过这个问题，后期可以将开发以及生产的webpack分开配置来实现不同的需求。</p>
<p>然后添加了这些配置项</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    devtool<span class="punctuation">:</span> &#x27;inline-source-map&#x27;<span class="punctuation">,</span></span><br><span class="line">    devServer<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        host<span class="punctuation">:</span> &#x27;<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">        publicPath<span class="punctuation">:</span> &#x27;/&#x27;<span class="punctuation">,</span></span><br><span class="line">        hot<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>inline-source-map</strong> 的作用为将js文件打包后同时生成source map文件用于开发时的debugger，生产环境下建议不配置，后期也会将它抽离出公共的配置。 <strong>devServer</strong> 是用于配置开发环境下的配置项，更多的参数可以查看官方文档，这里不做详细介绍。</p>
<p>最后配置package.json的script，用于快速启动开发服务：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config ./build/webpack.base.js --mode=production&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --config ./build/webpack.base.js --mode=development --color --open&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>此时运行</p>
<blockquote>
<p>npm run dev</p>
</blockquote>
<p>打开控制台提示的运行的地址</p>
<blockquote>
<p>Project is running at <a href="http://localhost:8080/">http://localhost:8080/</a></p>
</blockquote>
<p>打开这个地址就能够看到站点了，同时修改js文件以及css文件，可以看见页面的同步更改。</p>
<h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>完成上面的步骤基本上已经可以进行开发和生产了，但是对于工程的优化可不能停下脚步，所以得进行以下步骤。</p>
<h2 id="抽离不同的配置项"><a href="#抽离不同的配置项" class="headerlink" title="抽离不同的配置项"></a>抽离不同的配置项</h2><p>就像之前说过的，维护一个公共的配置项，非公共的配置项抽离成几个不同的功能以适应不同的需求。这里需要使用到webpack-merge功能，先进行依赖的安装</p>
<blockquote>
<p>yarn add webpack-merge –dev</p>
</blockquote>
<p>新建三个文件，分别是 <strong>webpack.pro.js</strong> 用于配置打包生产环境的文件， <strong>webpack.dev.js</strong> 用于配置开发环境的文件，<strong>utils</strong> 用于抽离公共的工具函数。文件如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">getPathByRoot</span> = <span class="keyword">function</span> (<span class="params">targetPath</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../&#x27;</span>, targetPath)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.base.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;static/images&#x27;</span>,</span><br><span class="line">                        <span class="attr">fallback</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.pro.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackBaseConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(webpackBaseConfig, &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/index.[hash].css&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.dev.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackBaseConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(webpackBaseConfig, &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;inline-source-map&#x27;</span>,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>修改package.json的script：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config ./build/webpack.pro.js --mode=production&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --config ./build/webpack.dev.js --mode=development --color --open&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>主要是修改了使用的配置文件为pro 和 dev 文件。</p>
<h2 id="打包前删除之前的文件"><a href="#打包前删除之前的文件" class="headerlink" title="打包前删除之前的文件"></a>打包前删除之前的文件</h2><p>每次打包如果文件修改了，那么就会修改文件的hash值，所以文件不会存在冲突的情况，所以上一次打包的文件还会存在于dist目录，这样会造成打包后的文件过大不便于管理，也有可能因为浏览器缓存的原因，请求的是之前的文件，所以得将之前的打包文件删除掉，所以这里我们需要使用到 <strong>clean-webpack-plugin</strong>，首先安装依赖。</p>
<blockquote>
<p>yarn add clean-webpack-plugin –dev</p>
</blockquote>
<p>然后修改配置项：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.pro.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackBaseConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackCleanPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(webpackBaseConfig, &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/index.[hash].css&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WebpackCleanPlugin</span>(<span class="title function_">getPathByRoot</span>(<span class="string">&#x27;./dist&#x27;</span>), &#123;</span><br><span class="line">            <span class="attr">allowExternal</span>: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>运行打包命令，可以看见在打包之前，删除了dist目录。</p>
<h2 id="打包后GZIP压缩静态资源"><a href="#打包后GZIP压缩静态资源" class="headerlink" title="打包后GZIP压缩静态资源"></a>打包后GZIP压缩静态资源</h2><p>gzip的压缩，可以极大的减少http请求的size，优化站点的加载速度，需进行以下配置:</p>
<p>先安装依赖 <strong>compression-webpack-plugin</strong></p>
<blockquote>
<p>yarn add <a href="mailto:&#x63;&#x6f;&#109;&#x70;&#x72;&#101;&#115;&#115;&#x69;&#111;&#110;&#x2d;&#x77;&#x65;&#x62;&#x70;&#97;&#99;&#107;&#45;&#x70;&#108;&#x75;&#103;&#105;&#110;&#x40;&#49;&#x2e;&#x31;&#x2e;&#49;&#x32;">&#x63;&#x6f;&#109;&#x70;&#x72;&#101;&#115;&#115;&#x69;&#111;&#110;&#x2d;&#x77;&#x65;&#x62;&#x70;&#97;&#99;&#107;&#45;&#x70;&#108;&#x75;&#103;&#105;&#110;&#x40;&#49;&#x2e;&#x31;&#x2e;&#49;&#x32;</a> –dev</p>
</blockquote>
<p>这里指定版本号为1.1.12，因为2.0的版本在我这个环境下报错了，所以使用1.1.12</p>
<p>其次修改webpack配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.pro.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackBaseConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackCleanPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;compression-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(webpackBaseConfig, &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CompressionPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">test</span>: [<span class="regexp">/\.js$/</span>, <span class="regexp">/\.css$/</span>],</span><br><span class="line">            <span class="attr">asset</span>: <span class="string">&#x27;[path].gz&#x27;</span>,</span><br><span class="line">            <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.[hash].css&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WebpackCleanPlugin</span>(<span class="title function_">getPathByRoot</span>(<span class="string">&#x27;./dist&#x27;</span>), &#123;</span><br><span class="line">            <span class="attr">allowExternal</span>: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>完成配置后就可以打包出gzip文件了，不过还得nginx服务器打开gzip的支持才行。</p>
<h2 id="查看webpack打包进度"><a href="#查看webpack打包进度" class="headerlink" title="查看webpack打包进度"></a>查看webpack打包进度</h2><p>使用 <strong>progress-bar-webpack-plugin</strong> 插件，首先安装</p>
<blockquote>
<p>yarn add progress-bar-webpack-plugin –dev</p>
</blockquote>
<p>其次修改webpack配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.base.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ProgressBarPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;progress-bar-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">exclude</span>: <span class="regexp">/\/node_modules/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;static/images&#x27;</span>,</span><br><span class="line">                        <span class="attr">fallback</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ProgressBarPlugin</span>(),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>进度条就添加了。</p>
<h2 id="抽离公共依赖项"><a href="#抽离公共依赖项" class="headerlink" title="抽离公共依赖项"></a>抽离公共依赖项</h2><p>因为是模块式的开发，对于jquery vue等库的文件，需要多次引入，如果不提取公共依赖项，那么就会导致每个js文件中都会有这两个库的文件。如果提取出来，将会大大减少文件的体积，优化浏览器的下载速度，而且可以将公共依赖项设置成强缓存，可以进一步减少http请求的开支，下面我们就添加这个功能，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ProgressBarPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;progress-bar-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;src/index.js&#x27;</span>),</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/index.[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">getPathByRoot</span>(<span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">exclude</span>: <span class="regexp">/\/node_modules/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;babel-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;html-loader&#x27;</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;static/images&#x27;</span>,</span><br><span class="line">                        <span class="attr">fallback</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">            <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;commons&#x27;</span>,</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/js/[name].[hash].js&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ProgressBarPlugin</span>(),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为在webpack4.0中提取公共文件已经是内置功能了，所以不需要插件。只需要在配置文件中插入这样的一个配置就行：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">optimization<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    splitChunks<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        chunks<span class="punctuation">:</span> &#x27;all&#x27;<span class="punctuation">,</span></span><br><span class="line">        name<span class="punctuation">:</span> &#x27;commons&#x27;<span class="punctuation">,</span></span><br><span class="line">        filename<span class="punctuation">:</span> &#x27;static/js/<span class="punctuation">[</span>name<span class="punctuation">]</span>.<span class="punctuation">[</span>hash<span class="punctuation">]</span>.js&#x27;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>安装jqery 和 vue进行一次测试</p>
<blockquote>
<p>yarn add jquery vue</p>
</blockquote>
<p>然后在src&#x2F;index.js中引入这两个库文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#app&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>运行打包命令后查看js文件会发现多出了一个common.js文件，打开可以看见内容只包含了jquery 和 vue 的源码，打开打包后的index.html也可以看见引入了common.js文件，说明提取公共依赖项成功了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;./static/css/main.bf73755b575b70e4fc39.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./static/images/WechatIMG5.72047b6d3b0f1c1f1dc0a1fa9c81188f.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./static/js/commons.bf73755b575b70e4fc39.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./static/js/index.bf73755b575b70e4fc39.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/23492006/46663106-d1a9f980-cbef-11e8-8e21-3deac19b522e.png" alt="图片加载失败，需科学上网"></p>
<h2 id="查看打包后的文件结构"><a href="#查看打包后的文件结构" class="headerlink" title="查看打包后的文件结构"></a>查看打包后的文件结构</h2><p>使用 <strong>webpack-bundle-analyzer</strong> 插件，可以查看到打包后的js文件的内部细节，可以很清楚的分析哪些细节可以优化，首先安装依赖。</p>
<blockquote>
<p>yarn add webpack-bundle-analyzer –dev</p>
</blockquote>
<p>然后进行webpack配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.pro.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackBaseConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackCleanPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;compression-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BundleAnalyzerPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).<span class="property">BundleAnalyzerPlugin</span></span><br><span class="line"><span class="keyword">const</span> getPathByRoot = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>).<span class="property">getPathByRoot</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(webpackBaseConfig, &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CompressionPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">test</span>: [<span class="regexp">/\.js$/</span>, <span class="regexp">/\.css$/</span>],</span><br><span class="line">            <span class="attr">asset</span>: <span class="string">&#x27;[path].gz&#x27;</span>,</span><br><span class="line">            <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;static/css/main.[hash].css&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WebpackCleanPlugin</span>(<span class="title function_">getPathByRoot</span>(<span class="string">&#x27;./dist&#x27;</span>), &#123;</span><br><span class="line">            <span class="attr">allowExternal</span>: <span class="literal">true</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>()</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>运行打包后会打开浏览器有以下界面，可以很清楚的看见js文件的内容：<br><img src="https://user-images.githubusercontent.com/23492006/46659849-51cc6100-cbe8-11e8-9248-d9e79d36efaa.png" alt="图片加载失败，需科学上网"></p>
<p>借用官方文档的动图，可以看见更直观的细节：<br><img src="https://cloud.githubusercontent.com/assets/302213/20628702/93f72404-b338-11e6-92d4-9a365550a701.gif" alt="gif"></p>
<h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>到这里，基本的配置都已经完成了，如果你想实现更多的功能，就需要自己去探索啦。<br>工程地址：<a href="https://github.com/Richard-Choooou/teach-webpack">https://github.com/Richard-Choooou/teach-webpack</a></p>
<p>例外有两个之前配置的webpack脚手架可以看一看：</p>
<p>用于vue组件系统开发的webpack配置： <a href="https://github.com/Richard-Choooou/vue-component-webpack">https://github.com/Richard-Choooou/vue-component-webpack</a></p>
<p>多页面开发的webpack配置：<a href="https://github.com/Richard-Choooou/mpa-webpack4.0-config">https://github.com/Richard-Choooou/mpa-webpack4.0-config</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/10/05/window-%E7%B3%BB%E7%BB%9F%E4%B8%8B-c%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="prev" title="window 系统下 c语言开发环境配置">
      <i class="fa fa-chevron-left"></i> window 系统下 c语言开发环境配置
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/10/13/electron-%E7%88%AC%E5%9D%91%E8%AE%B0/" rel="next" title="electron 爬坑记">
      electron 爬坑记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">初始化工程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85webpack"><span class="nav-number">2.2.</span> <span class="nav-text">安装webpack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#loaders-plugins"><span class="nav-number">2.3.</span> <span class="nav-text">loaders &amp; plugins</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bable-loader"><span class="nav-number">2.3.1.</span> <span class="nav-text">bable-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#html-loader-%E4%BB%A5%E5%8F%8A-html-webpack-plugin"><span class="nav-number">2.3.2.</span> <span class="nav-text">html-loader 以及 html-webpack-plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">2.3.3.</span> <span class="nav-text">css预处理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mini-css-extract-plugin"><span class="nav-number">2.3.4.</span> <span class="nav-text">mini-css-extract-plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file-loader-url-loader"><span class="nav-number">2.3.5.</span> <span class="nav-text">file-loader url-loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HotModuleReplacementPlugin"><span class="nav-number">2.4.</span> <span class="nav-text">HotModuleReplacementPlugin</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BC%98%E5%8C%96"><span class="nav-number">3.</span> <span class="nav-text">优化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%BD%E7%A6%BB%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="nav-number">3.1.</span> <span class="nav-text">抽离不同的配置项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%89%8D%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E7%9A%84%E6%96%87%E4%BB%B6"><span class="nav-number">3.2.</span> <span class="nav-text">打包前删除之前的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%90%8EGZIP%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="nav-number">3.3.</span> <span class="nav-text">打包后GZIP压缩静态资源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bwebpack%E6%89%93%E5%8C%85%E8%BF%9B%E5%BA%A6"><span class="nav-number">3.4.</span> <span class="nav-text">查看webpack打包进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%BD%E7%A6%BB%E5%85%AC%E5%85%B1%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="nav-number">3.5.</span> <span class="nav-text">抽离公共依赖项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%93%E5%8C%85%E5%90%8E%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-number">3.6.</span> <span class="nav-text">查看打包后的文件结构</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%93%E5%B0%BE"><span class="nav-number">4.</span> <span class="nav-text">结尾</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Richard Chou</p>
  <div class="site-description" itemprop="description">Blogs for Richard Chou</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard Chou</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
